jaxon.config.requestURI='/audit/jaxon';jaxon.config.statusMessages=false;jaxon.config.waitCursor=true;jaxon.config.version='Jaxon 5.x';jaxon.config.defaultMode='asynchronous';jaxon.config.defaultMethod='POST';jaxon.config.responseType='JSON';jaxon.setCsrf('csrf-token');jaxon.dom.ready(()=>jaxon.processCustomAttrs());jaxon.dom.ready(()=>jaxon.dialog.config({"labels":{"confirm":{"yes":"Yes","no":"No"}},"defaults":{"modal":"bootbox","alert":"sweetalert","confirm":"sweetalert"}}));const jx={rc:(name,method,parameters,options={})=>jaxon.request({type:'class',name,method},{parameters,...options}),rf:(name,parameters,options={})=>jaxon.request({type:'func',name},{parameters,...options}),c0:'Lagdo.DbAdmin.Ajax.Audit.Commands',};Lagdo={DbAdmin:{Ajax:{Audit:{Commands:{html:(...args)=>jx.rc(jx.c0,'html',args,{bags:["dbadmin.audit"]}),page:(...args)=>jx.rc(jx.c0,'page',args,{bags:["dbadmin.audit"]}),show:(...args)=>jx.rc(jx.c0,'show',args,{bags:["dbadmin.audit"]}),paginationAttributes:(...args)=>jx.rc(jx.c0,'paginationAttributes',args,{bags:["dbadmin.audit"]}),clear:(...args)=>jx.rc(jx.c0,'clear',args,{bags:["dbadmin.audit"]}),visible:(...args)=>jx.rc(jx.c0,'visible',args,{bags:["dbadmin.audit"]}),render:(...args)=>jx.rc(jx.c0,'render',args,{bags:["dbadmin.audit"]}),item:(...args)=>jx.rc(jx.c0,'item',args,{bags:["dbadmin.audit"]}),},},},},};(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?factory(exports):typeof define==='function'&&define.amd?define(['exports'],factory):(global=typeof globalThis!=='undefined'?globalThis:global||self,factory(global.Spin={}));})(this,(function(exports){'use strict';var __assign=(undefined&&undefined.__assign)||function(){__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))
t[p]=s[p];}
return t;};return __assign.apply(this,arguments);};var defaults={lines:12,length:7,width:5,radius:10,scale:1.0,corners:1,color:'#000',fadeColor:'transparent',animation:'spinner-line-fade-default',rotate:0,direction:1,speed:1,zIndex:2e9,className:'spinner',top:'50%',left:'50%',shadow:'0 0 1px transparent',position:'absolute',};var Spinner=(function(){function Spinner(opts){if(opts===void 0){opts={};}
this.opts=__assign(__assign({},defaults),opts);}
Spinner.prototype.spin=function(target){this.stop();this.el=document.createElement('div');this.el.className=this.opts.className;this.el.setAttribute('role','progressbar');this.el.style.position=this.opts.position;this.el.style.width="0";this.el.style.zIndex=this.opts.zIndex.toString();this.el.style.left=this.opts.left;this.el.style.top=this.opts.top;this.el.style.transform="scale(".concat(this.opts.scale,")");if(target){target.insertBefore(this.el,target.firstChild||null);}
drawLines(this.el,this.opts);return this;};Spinner.prototype.stop=function(){if(this.el){if(this.el.parentNode){this.el.parentNode.removeChild(this.el);}
this.el=undefined;}
return this;};return Spinner;}());function getColor(color,idx){return typeof color=='string'?color:color[idx%color.length];}
function drawLines(el,opts){var borderRadius=(Math.round(opts.corners*opts.width*500)/ 1000)+'px';var shadow='none';if(opts.shadow===true){shadow='0 2px 4px #000';}
else if(typeof opts.shadow==='string'){shadow=opts.shadow;}
var shadows=parseBoxShadow(shadow);for(var i=0;i<opts.lines;i++){var degrees=~~(360 / opts.lines*i+opts.rotate);var backgroundLine=document.createElement('div');backgroundLine.style.position='absolute';backgroundLine.style.top="".concat(-opts.width / 2,"px");backgroundLine.style.width=(opts.length+opts.width)+'px';backgroundLine.style.height=opts.width+'px';backgroundLine.style.background=getColor(opts.fadeColor,i);backgroundLine.style.borderRadius=borderRadius;backgroundLine.style.transformOrigin='left';backgroundLine.style.transform="rotate(".concat(degrees,"deg) translateX(").concat(opts.radius,"px)");var delay=i*opts.direction / opts.lines / opts.speed;delay-=1 / opts.speed;var line=document.createElement('div');line.style.width='100%';line.style.height='100%';line.style.background=getColor(opts.color,i);line.style.borderRadius=borderRadius;line.style.boxShadow=normalizeShadow(shadows,degrees);line.style.animation="".concat(1 / opts.speed,"s linear ").concat(delay,"s infinite ").concat(opts.animation);backgroundLine.appendChild(line);el.appendChild(backgroundLine);}}
function parseBoxShadow(boxShadow){var regex=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/;var shadows=[];for(var _i=0,_a=boxShadow.split(',');_i<_a.length;_i++){var shadow=_a[_i];var matches=shadow.match(regex);if(matches===null){continue;}
var x=+matches[2];var y=+matches[5];var xUnits=matches[4];var yUnits=matches[7];if(x===0&&!xUnits){xUnits=yUnits;}
if(y===0&&!yUnits){yUnits=xUnits;}
if(xUnits!==yUnits){continue;}
shadows.push({prefix:matches[1]||'',x:x,y:y,xUnits:xUnits,yUnits:yUnits,end:matches[8],});}
return shadows;}
function normalizeShadow(shadows,degrees){var normalized=[];for(var _i=0,shadows_1=shadows;_i<shadows_1.length;_i++){var shadow=shadows_1[_i];var xy=convertOffset(shadow.x,shadow.y,degrees);normalized.push(shadow.prefix+xy[0]+shadow.xUnits+' '+xy[1]+shadow.yUnits+shadow.end);}
return normalized.join(', ');}
function convertOffset(x,y,degrees){var radians=degrees*Math.PI / 180;var sin=Math.sin(radians);var cos=Math.cos(radians);return[Math.round((x*cos+y*sin)*1000)/ 1000,Math.round((-x*sin+y*cos)*1000)/ 1000,];}
exports.Spinner=Spinner;}));jaxon.dbadmin={};(function(self){const countTableCheckboxes=(checkboxClass,checkboxId)=>$(`#${checkboxId}-count`).html($(`.${checkboxClass}`+':checked').length);self.selectTableCheckboxes=(checkboxClass,checkboxId,wrapperId)=>{$(`#${checkboxId}-all`).change(function(){$(`.${checkboxClass}`,`#${wrapperId}`).prop('checked',this.checked);countTableCheckboxes(checkboxClass,checkboxId);});$(`.${checkboxClass}`,`#${wrapperId}`).change(function(){countTableCheckboxes(checkboxClass,checkboxId);});};self.setExportEventHandlers=(itemNameClass,itemNameId,itemDataClass,itemDataId,wrapperId)=>{$(`#${itemNameId}-all`).change(function(){$(`.${itemNameClass}`,`#${wrapperId}`).prop('checked',this.checked);});$(`#${itemDataId}-all`).change(function(){$(`.${itemDataClass}`,`#${wrapperId}`).prop('checked',this.checked);});$(`.${itemNameClass}`,`#${wrapperId}`).change(function(){const itemDataPos=$(this).attr('data-pos');$(`#${itemDataId}-${itemDataPos}`,`#${wrapperId}`).prop('checked',this.checked);});};self.setFileUpload=(wrapperId)=>{$(`#${wrapperId}`).on('change',':file',function(){const fileInput=$(this);const numFiles=fileInput.get(0).files?fileInput.get(0).files.length:1;const label=fileInput.val().replace(/\\/g,'/').replace(/.*\//,'');const textInput=$(`#${wrapperId}`).find(':text');const text=numFiles>1?numFiles+' files selected':label;if(textInput.length>0){textInput.val(text);}});};self.downloadFile=(url,filename)=>{const downloadLink=document.createElement("a");downloadLink.href=url;downloadLink.download=filename;document.body.appendChild(downloadLink);downloadLink.click();document.body.removeChild(downloadLink);};const makeHtmlNode=(htmlText)=>{const node=document.createElement('div');node.innerHTML=htmlText;if(node.firstChild!==null){jaxon.parser.attr.process(node.firstChild);}
return node.firstChild;};self.activateTab=(tabNavId)=>document.getElementById(tabNavId)?.click(new Event('click'));self.addTab=(tabNavWrapper,tabNavHtml,tabContentWrapper,tabContentHtml,activeTab)=>{const tabNav=document.getElementById(tabNavWrapper);tabNav.appendChild(makeHtmlNode(tabNavHtml));const tabContent=document.getElementById(tabContentWrapper);tabContent.appendChild(makeHtmlNode(tabContentHtml));if(activeTab!==undefined){self.activateTab(activeTab);}};self.delTab=(tabNavId,tabContentId,activeTab)=>{document.getElementById(tabNavId)?.parentElement?.remove();document.getElementById(tabContentId)?.remove();if(activeTab!==undefined){self.activateTab(activeTab);}};})(jaxon.dbadmin);jaxon.dom.ready(()=>{const spin={spinner:new Spin.Spinner({position:'fixed'}),count:0,cursor:jaxon.config.cursor.update,};jaxon.config.cursor.update={onRequest:function(){if(spin.count++===0){spin.spinner.spin(document.body);spin.cursor.onRequest();}},onComplete:function(){if(--spin.count===0){spin.spinner.stop();spin.cursor.onComplete();}},onFailure:function(){if(--spin.count===0){spin.spinner.stop();spin.cursor.onFailure&&spin.cursor.onFailure();}},};});jaxon.dom.ready(()=>jaxon.dialog.register('bootbox',(self,options,utils)=>{const{labels,modal:modalOptions={},alert:alertOptions={},confirm:confirmOptions={},}=options;const dialog={dom:null,};self.show=({title,content,buttons,options},cbDomElement)=>{let btnIndex=1;const oButtons={};buttons.forEach(({title:label,class:className,click})=>{if(!utils.isObject(click)){oButtons.cancel={label,className:'btn-danger'};return;}
oButtons[`btn${btnIndex++}`]={label,className,callback:()=>{utils.js(click);return false;},};});dialog.dom=bootbox.dialog({...modalOptions,...options,title,message:content!==''?content:'&nbsp;',buttons:oButtons,});cbDomElement(dialog.dom.get(0));};self.hide=()=>{if((dialog.dom)){dialog.dom.modal('hide');dialog.dom=null;}};const xTypes={success:'success',info:'info',warning:'warning',error:'danger',};self.alert=({type,message,title})=>{message='<div class="alert alert-'+(xTypes[type]??xTypes.info)+'" style="margin-top:15px;margin-bottom:-15px;">'+
(!message?'':'<strong>'+title+'</strong><br/>')+message+'</div>';bootbox.alert({...alertOptions,message});};self.confirm=({question,title},{yes:yesCb,no:noCb=()=>{}})=>bootbox.confirm({...confirmOptions,title:title,message:question,buttons:{cancel:{label:labels.no},confirm:{label:labels.yes}},callback:(res)=>{res?yesCb():noCb();},});}));jaxon.dom.ready(()=>jaxon.dialog.register('sweetalert',(self,options)=>{const{labels,alert:alertOptions={},confirm:confirmOptions={},}=options;const xTypes={success:'success',info:'info',warning:'warning',error:'error',};self.alert=({type,message,title})=>Swal.fire({...alertOptions,text:message,title:title??'',icon:xTypes[type]??xTypes.info,});self.confirm=({question,title},{yes:yesCb,no:noCb=()=>{}})=>Swal.fire({...confirmOptions,icon:"question",title,text:question,showCancelButton:true,confirmButtonText:labels.yes,cancelButtonText:labels.no,reverseButtons:true,}).then((result)=>{result.isConfirmed?yesCb():noCb();});}));jaxon.dom.ready(()=>jaxon.dialog.register('notyf',(self,options)=>{const{alert:alertOptions={},}=options;const xTypes={success:'success',info:'info',warning:'warning',error:'error',};const notyf=new Notyf({duration:5000,ripple:false,dismissible:true,position:{x:'center',y:'top'},types:[{type:'success',className:'notyf__toast--success',backgroundColor:'#3dc763',icon:false,},{type:'error',className:'notyf__toast--error',backgroundColor:'#ed3d3d',icon:false,},{type:'warning',background:'#FEBE10',icon:false,},{type:'info',background:'#318CE7',icon:false,}],...alertOptions,});self.alert=({type,message,title})=>{notyf.open({type:xTypes[type]??xTypes.info,message});};}));